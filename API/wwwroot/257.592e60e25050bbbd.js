"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[257],{1257:(O,h,o)=>{o.r(h),o.d(h,{SharedModule:()=>F});var u=o(6814),p=o(1896),s=o(9212),c=o(7398),v=o(1647),y=o(2130),f=o(2425),g=o(5619),C=o(8180),m=o(1474),P=o(4826);let l=(()=>{class e extends P.q{constructor(t){super(t,"shared")}getComplect(t){const r=(new m.LE).set("id",t);return this.http.get(`${this.rootUrl}getComplect`,{params:r})}static#t=this.\u0275fac=function(r){return new(r||e)(s.LFG(m.eN))};static#e=this.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac})}return e})(),d=(()=>{class e{constructor(t){this.sharedHttpService=t,this.complectSource=new g.X(null),this.complect$=this.complectSource.asObservable()}loadComplect(t){return this.sharedHttpService.getComplect(t).pipe((0,c.U)(r=>(this.complectSource.next(r),r)))}clearComplect(){this.complectSource.next(null)}updatePropertyParam(t){this.resetPropertyParams([t])}updatePropertyParams(t){this.resetPropertyParams(t)}resetPropertyParams(t){this.complect$.pipe((0,C.q)(1)).subscribe(r=>{t.forEach(a=>{const i=r?.properties.find(n=>n.id===a.propertyId);i&&(i.params=a)}),this.complectSource.next(r)})}static#t=this.\u0275fac=function(r){return new(r||e)(s.LFG(l))};static#e=this.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac})}return e})();var S=o(8685);const $=[{path:":id",component:(()=>{class e{constructor(t,r,a){this.activatedRoute=t,this.toastr=r,this.sharedService=a,this.screenStateStore=(0,s.f3M)(y.M),this.subscriptions=[],this.complect$=this.sharedService.complect$.pipe((0,c.U)(i=>i?.complect??null)),this.properties$=this.sharedService.complect$.pipe((0,c.U)(i=>i?.properties??null)),this.items$=this.sharedService.complect$.pipe((0,c.U)(i=>i?.items&&i.properties?i.items.map(n=>v.O.getItem(n,i.properties)):null))}ngOnInit(){const t=this.activatedRoute.paramMap.subscribe(r=>{const a=r.get("id");a?this.subscriptions.push(this.sharedService.loadComplect(a).subscribe(i=>{})):(this.toastr.error("Id is undefined"),this.sharedService.clearComplect())});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(t=>{t&&t.unsubscribe()})}onCurrentCategoryChange(t){}onPropertyParamChange(t){this.sharedService.updatePropertyParam(t)}onPropertyParamsChange(t){this.sharedService.updatePropertyParams(t)}static#t=this.\u0275fac=function(r){return new(r||e)(s.Y36(p.gz),s.Y36(f._W),s.Y36(d))};static#e=this.\u0275cmp=s.Xpm({type:e,selectors:[["app-shared"]],decls:3,vars:7,consts:[[1,"shared"],["shared",""],[1,"block","complect-items","active",3,"isActive","complect$","items$","properties$","isReadonly","propertyParamsChange","propertyParamChange"]],template:function(r,a){1&r&&(s.TgZ(0,"section",0,1)(2,"app-complect-items",2),s.NdJ("propertyParamsChange",function(n){return a.onPropertyParamsChange(n)})("propertyParamChange",function(n){return a.onPropertyParamChange(n)}),s.qZA()()),2&r&&(s.ekj("mobile",a.screenStateStore.isMobilePortrait()),s.xp6(2),s.Q6J("isActive",!0)("complect$",a.complect$)("items$",a.items$)("properties$",a.properties$)("isReadonly",!0))},dependencies:[S.J],styles:[".shared[_ngcontent-%COMP%]{display:flex;justify-content:stretch;align-items:stretch;width:100%;height:100%;gap:5px;padding:5px}.shared[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1 0 auto;height:100%;width:100%}"]})}return e})()}];let M=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=s.oAB({type:e});static#r=this.\u0275inj=s.cJS({imports:[p.Bz.forChild($),p.Bz]})}return e})();var b=o(1658);let F=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=s.oAB({type:e});static#r=this.\u0275inj=s.cJS({providers:[l,d],imports:[u.ez,M,b.C]})}return e})()}}]);